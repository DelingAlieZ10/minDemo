<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>title</title>
    <style type="text/css">
        * {
            padding: 0px;
            margin: 0px;
        }

        #main {
            position: relative;
        }

        .box {
            padding: 15px 0px 0px 15px;
            float: left;
        }

        .pic {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-shadow: 0 0 5px #ccc;
        }

        .pic img {
            width: 165px;
            height: auto;
        }
    </style>
</head>

<body>
    <div id="main">
        <div class="box">
            <div class="pic">
                <img src="../imgs/a1.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">

            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/xiongmao.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/a3.jpg">
            </div>
        </div>
        <div class="box">
            <div class="pic">
                <img src="../imgs/nothing.png">
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script>
    window.onload = function () {
        waterFull('main', 'box');
    }

    function waterFull(parent, children) {
        var Allbox = $("#" + parent + ">." + children);
        //    console.log(Allbox);
        var itemWidth = Allbox[0].clientWidth;
        //    console.log(itemWidth);
        var mainWidth = $("#" + parent)[0].clientWidth;
        //    console.log(mainWidth);
        var cols = Math.floor(mainWidth / itemWidth)
        // console.log(cols);
        $("#" + parent).css({
            "width": cols * itemWidth + "px",
            "margin": "0 auto"
        })
        var heightArr = [];
        $.each(Allbox, function (index, value) {
            // var itemHeight = $(value).outerHeight();
            var itemHeight = $(value)[0].offsetHeight;
            // console.log($(value).outerHeight())
            // console.log($(value)[0].offsetHeight)
            if (index < cols) {
                heightArr[index] = value.clientHeight;
            } else {
                var minHeight = Math.min.apply(null, heightArr)
                console.log(minHeight);
                var minHeightIndex = $.inArray(minHeight, heightArr);
                // console.log(minHeightIndex);
                // console.log(itemWidth)
                $(value).css({
                    "position": "absolute",
                    "top": heightArr[minHeightIndex] + "px",
                    "left": minHeightIndex * itemWidth + "px"
                })
                console.log(heightArr[minHeightIndex]);
                // console.log(heightArr[minHeightIndex]*itemWidth);
                heightArr[minHeightIndex] += itemHeight
            }
        })

    }
</script>

</html>